<svg viewBox="0 0 800 970" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <filter id="shadow">
      <feDropShadow dx="0" dy="2" stdDeviation="4" flood-opacity="0.12"/>
    </filter>
  </defs>
  
  <!-- Step 1: User Form Input in Client Component -->
  <g filter="url(#shadow)">
    <rect x="100" y="30" width="600" height="150" rx="12" fill="#ffffff" stroke="#e2e8f0" stroke-width="2"/>
    <circle cx="130" cy="60" r="20" fill="#3b82f6"/>
    <text x="130" y="68" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="white" text-anchor="middle">1</text>
    <text x="170" y="67" font-family="Arial, sans-serif" font-size="20" font-weight="600" fill="#1e293b" text-anchor="start">
      사용자 폼 입력 &amp; 제출
    </text>
    <text x="170" y="90" font-family="Arial, sans-serif" font-size="15" fill="#64748b" text-anchor="start">
      Client Component (useFormAction hook)
    </text>
    <text x="130" y="120" font-family="Arial, sans-serif" font-size="14" fill="#475569" text-anchor="start">
      • &lt;form onSubmit={handleSubmit}&gt; [ID] [제목] [내용] [제출] &lt;/form&gt;
    </text>
    <text x="130" y="145" font-family="Arial, sans-serif" font-size="14" fill="#475569" text-anchor="start">
      • const { loading, data, error, submitAction } = useFormAction(postsAction)
    </text>
    <text x="130" y="165" font-family="Arial, sans-serif" font-size="14" fill="#475569" text-anchor="start">
      • await submitAction(formData)
    </text>
  </g>
  
  <!-- Arrow 1 -->
  <g>
    <path d="M 400 180 L 400 220" stroke="#cbd5e1" stroke-width="3" fill="none"/>
    <polygon points="400 230, 395 220, 405 220" fill="#cbd5e1"/>
    <rect x="420" y="195" width="140" height="20" fill="white" opacity="0.9"/>
    <text x="490" y="209" font-family="Arial, sans-serif" font-size="14" fill="#64748b" text-anchor="middle">
      FormData 전송
    </text>
  </g>
  
  <!-- Step 2: useFormAction Hook Processing -->
  <g filter="url(#shadow)">
    <rect x="100" y="235" width="600" height="130" rx="12" fill="#ffffff" stroke="#e2e8f0" stroke-width="2"/>
    <circle cx="130" cy="265" r="20" fill="#06b6d4"/>
    <text x="130" y="273" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="white" text-anchor="middle">2</text>
    <text x="170" y="272" font-family="Arial, sans-serif" font-size="20" font-weight="600" fill="#1e293b" text-anchor="start">
      useFormAction Hook 처리
    </text>
    <text x="170" y="295" font-family="Consolas, monospace" font-size="14" fill="#64748b" text-anchor="start">
      @hooks/api - useFormAction
    </text>
    <text x="130" y="325" font-family="Arial, sans-serif" font-size="15" fill="#475569" text-anchor="start">
      • setLoading(true)
    </text>
    <text x="130" y="345" font-family="Arial, sans-serif" font-size="15" fill="#475569" text-anchor="start">
      • action(formData) 호출 (postsAction)
    </text>
  </g>
  
  <!-- Arrow 2 -->
  <g>
    <path d="M 400 365 L 400 405" stroke="#cbd5e1" stroke-width="3" fill="none"/>
    <polygon points="400 415, 395 405, 405 405" fill="#cbd5e1"/>
    <rect x="420" y="380" width="110" height="20" fill="white" opacity="0.9"/>
    <text x="475" y="394" font-family="Arial, sans-serif" font-size="14" fill="#64748b" text-anchor="middle">
      Server Action
    </text>
  </g>
  
  <!-- Step 3: Server Action -->
  <g filter="url(#shadow)">
    <rect x="100" y="420" width="600" height="120" rx="12" fill="#ffffff" stroke="#e2e8f0" stroke-width="2"/>
    <circle cx="130" cy="450" r="20" fill="#8b5cf6"/>
    <text x="130" y="458" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="white" text-anchor="middle">3</text>
    <text x="170" y="457" font-family="Arial, sans-serif" font-size="20" font-weight="600" fill="#1e293b" text-anchor="start">
      Server Action
    </text>
    <text x="170" y="480" font-family="Consolas, monospace" font-size="14" fill="#64748b" text-anchor="start">
      postsAction.ts
    </text>
    <text x="130" y="510" font-family="Arial, sans-serif" font-size="15" fill="#475569" text-anchor="start">
      • FormData 파싱 (id, title, body)
    </text>
    <text x="130" y="530" font-family="Arial, sans-serif" font-size="15" fill="#475569" text-anchor="start">
      • serverApi() 호출 → REST API 요청
    </text>
  </g>
  
  <!-- Arrow 3 -->
  <g>
    <path d="M 400 540 L 400 580" stroke="#cbd5e1" stroke-width="3" fill="none"/>
    <polygon points="400 590, 395 580, 405 580" fill="#cbd5e1"/>
    <rect x="420" y="555" width="100" height="20" fill="white" opacity="0.9"/>
    <text x="470" y="569" font-family="Arial, sans-serif" font-size="14" fill="#64748b" text-anchor="middle">
      HTTP POST
    </text>
  </g>
  
  <!-- Step 4: REST API -->
  <g filter="url(#shadow)">
    <rect x="100" y="595" width="600" height="110" rx="12" fill="#ffffff" stroke="#e2e8f0" stroke-width="2"/>
    <circle cx="130" cy="625" r="20" fill="#10b981"/>
    <text x="130" y="633" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="white" text-anchor="middle">4</text>
    <text x="170" y="632" font-family="Arial, sans-serif" font-size="20" font-weight="600" fill="#1e293b" text-anchor="start">
      REST API 응답
    </text>
    <text x="170" y="655" font-family="Arial, sans-serif" font-size="14" fill="#64748b" text-anchor="start">
      jsonplaceholder.typicode.com/posts
    </text>
    <text x="400" y="680" font-family="Consolas, monospace" font-size="12" fill="#475569" text-anchor="middle">
      { success: true, message: "...",
    </text>
    <text x="400" y="695" font-family="Consolas, monospace" font-size="12" fill="#475569" text-anchor="middle">
      data: { id: 101, title: "...", body: "..." } }
    </text>
  </g>
  
  <!-- Arrow 4 -->
  <g>
    <path d="M 400 705 L 400 745" stroke="#cbd5e1" stroke-width="3" fill="none"/>
    <polygon points="400 755, 395 745, 405 745" fill="#cbd5e1"/>
    <rect x="415" y="720" width="110" height="20" fill="white" opacity="0.9"/>
    <text x="470" y="734" font-family="Arial, sans-serif" font-size="14" fill="#64748b" text-anchor="middle">
      결과 객체 반환
    </text>
  </g>
  
  <!-- Step 5: Hook State Update -->
  <g filter="url(#shadow)">
    <rect x="100" y="760" width="600" height="170" rx="12" fill="#ffffff" stroke="#e2e8f0" stroke-width="2"/>
    <circle cx="130" cy="790" r="20" fill="#ec4899"/>
    <text x="130" y="798" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="white" text-anchor="middle">5</text>
    <text x="170" y="797" font-family="Arial, sans-serif" font-size="20" font-weight="600" fill="#1e293b" text-anchor="start">
      useFormAction Hook 상태 업데이트
    </text>
    <text x="170" y="820" font-family="Arial, sans-serif" font-size="14" fill="#64748b" text-anchor="start">
      Client Component - useFormAction hook
    </text>
    <text x="130" y="850" font-family="Consolas, monospace" font-size="14" fill="#475569" text-anchor="start">
      • setData(response) - 응답 데이터를 data state에 저장
    </text>
    <text x="130" y="875" font-family="Consolas, monospace" font-size="14" fill="#475569" text-anchor="start">
      • setLoading(false) - 로딩 상태 종료
    </text>
    <text x="400" y="908" font-family="Arial, sans-serif" font-size="15" fill="#64748b" text-anchor="middle">
      → 컴포넌트 리렌더링 → 결과 화면 표시 (data, loading, error state)
    </text>
  </g>
</svg>

